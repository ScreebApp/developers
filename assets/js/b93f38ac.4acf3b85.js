"use strict";(self.webpackChunkscreeb_docs=self.webpackChunkscreeb_docs||[]).push([[8173],{965:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var i=t(4848),s=t(8453);const r={sidebar_position:3},o="Identity",d={id:"identity",title:"Identity",description:"Set identity",source:"@site/docs/sdk-js/identity.md",sourceDirName:".",slug:"/identity",permalink:"/sdk-js/identity",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docSidebar",previous:{title:"NPM packages",permalink:"/sdk-js/npm-packages"},next:{title:"Group assignation",permalink:"/sdk-js/group-assignation"}},a={},l=[{value:"Set identity",id:"set-identity",level:2},{value:"Set identity on widget start",id:"set-identity-on-widget-start",level:3},{value:"Set identity later",id:"set-identity-later",level:3},{value:"Reset current identity",id:"reset-current-identity",level:3},{value:"Ignore anonymous user",id:"ignore-anonymous-user",level:3},{value:"Attributes",id:"attributes",level:2},{value:"Get current identity",id:"get-current-identity",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"identity",children:"Identity"}),"\n",(0,i.jsx)(n.h2,{id:"set-identity",children:"Set identity"}),"\n",(0,i.jsxs)(n.p,{children:["On a logged page of your website, you won't be able to identify who responded to surveys until you call the ",(0,i.jsx)(n.code,{children:"identity"})," command."]}),"\n",(0,i.jsx)(n.p,{children:"Thanks to this, you will be able to track this user over multiple platforms (desktop, mobile, tablet...)."}),"\n",(0,i.jsx)(n.p,{children:"The identifier of your website visitor must be unique and idempotent. User email is good, but can vary over time. We recommend using the user id."}),"\n",(0,i.jsx)("u",{children:"Requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The unique visitor id must have a length between 1 to 255 characters."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"set-identity-on-widget-start",children:"Set identity on widget start"}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"identity"})," is empty, the last identity will be used. If the Javascript widget is loaded for the first time, an anonymous identity will be created instead."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"$screeb('init', '<website-id>', {\n  identity: {\n    // Assign current session to a visitor identifier,\n    // such as your internal id, an email address...\n    id: '<unique-visitor-id>',\n    // Set visitor properties (optional)\n    properties: {\n      firstname: '<user-firstname>',\n      lastname: '<user-lastname>',\n      plan: '<user-plan>',\n      last_seen_at: new Date(),\n      authenticated: true,\n    }\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"set-identity-later",children:"Set identity later"}),"\n",(0,i.jsx)(n.p,{children:"You can change the current visitor identity at any time. Running surveys will be closed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// assign current session to a visitor identifier (such as your internal user id, an email address...)\n$screeb('identity', '<unique-visitor-id>');\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reset-current-identity",children:"Reset current identity"}),"\n",(0,i.jsxs)(n.p,{children:["When the user logs out, please call the ",(0,i.jsx)(n.code,{children:"reset"})," command."]}),"\n",(0,i.jsx)(n.p,{children:"This command must be called only once, since it creates a new identity on Screeb side. If you call it on every anonymous page, you won't be able to track visitor navigation and surveys will be sent many times to the same visitor."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"$screeb('identity.reset');\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ignore-anonymous-user",children:"Ignore anonymous user"}),"\n",(0,i.jsxs)(n.p,{children:["If you want to ignore anonymous users and only track identified users, you can use the ",(0,i.jsx)(n.code,{children:"ignore Anonymous"})," option. This will ensure that no data is collected for users who have not been identified."]}),"\n",(0,i.jsxs)(n.p,{children:["To Activate the ",(0,i.jsx)(n.code,{children:"ignore Anonymous"})," option, go to your screeb workspace settings and set the ",(0,i.jsx)(n.code,{children:"ignore Anonymous"})," option to ",(0,i.jsx)(n.code,{children:"true"}),".\n(",(0,i.jsx)(n.a,{href:"https://admin.screeb.app/org/last/settings/behaviour",children:"go to your workspace Settings"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["By setting ",(0,i.jsx)(n.code,{children:"ignore Anonymous"})," to ",(0,i.jsx)(n.code,{children:"true"}),", the widget will not collect any data until the ",(0,i.jsx)(n.code,{children:"identity"})," command is called with a unique visitor identifier."]}),"\n",(0,i.jsx)(n.h2,{id:"attributes",children:"Attributes"}),"\n",(0,i.jsx)(n.p,{children:'Screeb allows tracking some custom data about your website visitors. Those properties can be inserted as "hidden fields" in your surveys or can be used for an advanced targeting rule.'}),"\n",(0,i.jsx)("u",{children:"Requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Property names must be limited to 128 characters"}),"\n",(0,i.jsx)(n.li,{children:"No more than 1000 attributes"}),"\n",(0,i.jsx)(n.li,{children:"Supported types for values: string, number, boolean and Date."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// set visitor properties\n$screeb('identity.properties', {\n  email: 'samuel@screeb.app',\n  age: 42,\n  logged: true,\n  signed_up_at: new Date(),\n});\n\n// Delete visitor property : set values to null\n$screeb('identity.properties', {\n  email: 'samuel@screeb.app',\n  age: null,\n  company: null,\n  logged: true,\n});\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"identity"})," and ",(0,i.jsx)(n.code,{children:"identity.properties"})," can be executed in the same command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// Last argument is optional\n$screeb('identity', '<unique-visitor-id>', { email: 'samuel@screeb.app', plan: 'growth-monthly' });\n"})}),"\n",(0,i.jsx)(n.h2,{id:"get-current-identity",children:"Get current identity"}),"\n",(0,i.jsx)(n.p,{children:"You can get the current visitor identity at any time."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'$screeb(\'identity.get\').then(console.log);\n\n// {\n//     channel_id: "0e2b609a-8dce-4695-a80f-966fbfa87a88",\n//     anonymous_id: "30311998-5bc4-4cb7-8aca-d4189319b450",   // generated by Screeb\n//     user_id: "user-42",                                     // null if visitor has not been identified\n//     is_ready: true,                                         // false if screeb respondent is not initialised yet\n//     session_id: "eeba641a-f831-44cb-9d9e-5224ffc5b91b",\n//     session_start: "2023-02-01T17:07:50.097Z",\n//     session_end: "2023-02-01T17:32:57.632Z"\n// }\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);